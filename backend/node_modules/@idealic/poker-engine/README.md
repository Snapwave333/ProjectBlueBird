# @idealic/poker-engine

Professional poker game engine with TypeScript support. Provides comprehensive game state management, action processing, and hand evaluation for Texas Hold'em and other poker variants.

## Overview

The Poker Engine provides two core abstractions for building poker applications:

- **Hand**: A standardized notation format that stores the complete sequence of actions in a poker game, similar to chess notation. This action-based approach enables deterministic game reconstruction, easy storage, and network transmission.

- **Game**: A rich game state object containing all information needed to render a poker table, including player stacks, community cards, pot size, betting status, and available actions.

## Architecture

**Hand-Centric Design**: The engine uses a Hand-centric architecture where Hand objects serve as the single source of truth. Game objects are derived views for real-time processing.

**Client-Server Model**: The engine runs on both client and server, enabling optimistic rendering on the client while maintaining server authority for validation and randomness.

**Action-Based Processing**: Hands are advanced through action strings that are applied to Hand states, creating an immutable event-sourced system.

**Player Perspectives**: Each player receives a player's perspective point of view hand showing only their own cards and publicly revealed cards.

## Poker.Hand Namespace

The Hand namespace provides a standardized notation format for storing complete poker hands using an action-based approach. It handles parsing, serialization, player perspectives, and game state advancement, serving as the immutable event-sourced foundation for deterministic hand reconstruction and storage.

## Poker.Game Namespace

The Game namespace serves as a comprehensive poker management toolkit for live table operations, providing rules enforcement, player management, timing controls, analytics, and real-time game state queries. It transforms Hand objects into rich game states suitable for interactive poker applications and live gameplay.

## Command Integration

The Command system translates user interactions into properly formatted Action values for the core poker engine, providing a clean abstraction between UI inputs and game logic. It handles player actions (fold, call, bet, raise) and dealer operations (dealing cards, managing streets) while ensuring all actions conform to poker rules and game state requirements.

## Usage Examples

### Basic Hand Processing

```typescript
import * as Poker from '@idealic/poker-engine';

// Create a hand object
const hand = Poker.Hand({
  variant: 'NT',
  players: ['Alice', 'Bob'],
  startingStacks: [1000, 1000],
  blindsOrStraddles: [10, 20],
  minBet: 20,
  actions: []
});

// Convert to game state
const game = Poker.Game(hand);

// Or create game directly from properties
const game2 = Poker.Game({
  players: [
    { name: 'Alice', stack: 1000 },
    { name: 'Bob', stack: 1000 }
  ],
  minBet: 20
});

// Execute commands
const foldAction = Poker.Command.fold(game, 0);
const updatedHand = Poker.Hand.applyAction(hand, foldAction);

// Export for display (from player perspective)
const playerPerspectiveGame = Poker.Hand.personalize(hand, 'Alice');

// Check time elapsed
const elapsed = Poker.Hand.getTimeLeft(hand);

// Handle timeouts automatically (works with or without timeLimit set)
const timeoutCheckedHand = Poker.Hand.advance(hand);
```

## Documentation

### API Reference

- **[Engine reference](./specs/ENGINE.md)** - Complete reference for engine system design and principles.
- **[Game Namespace](./specs/GAME.md)** - Complete reference for game state management and real-time table processing.
- **[Hand Namespace](./specs/HAND.md)** - Complete reference for Hand notation format and poker hand storage.
- **[Command Namespace](./specs/COMMAND.md)** - Complete reference for action generation and command execution.

## License

MIT License - see [LICENSE](./LICENSE) file for details.