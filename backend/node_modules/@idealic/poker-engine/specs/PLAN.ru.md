# План запуска игр (двухтрековый)

## 1. Резюме

Этот документ описывает двухтрековый план для успешного запуска продукта к **1 октября**. План разработан для эффективного распределения ресурсов и четкого разграничения ответственности между нашими командами.

- **Трек 1: Основные задачи команды казино:** Ваша команда несет основную и единственную ответственность за завершение и запуск трех существующих игр: **Blackjack, Roulette и Baccarat**. Это базовый план для запуска.
- **Трек 2: Инициатива по покеру:** Параллельно наша команда занимается разработкой покера. Хотя это является для нас высокоприоритетной задачей и значительным вкладом в платформу, для запуска она позиционируется как "желательное, но не обязательное" дополнение, требующее минимальных ресурсов от вашей команды.

Такой двойной подход позволяет вашей команде сосредоточиться на гарантированных результатах, в то время как наша команда работает над включением покера — ключевого стратегического актива — в первоначальный запуск. Основным принципом для обоих треков остается **запуск важнее идеальности**.

## 2. План запуска и приоритеты

### Трек 1: Основные задачи команды казино (Ваши обязательства)

План релиза полностью зависит от успешной поставки ваших трех существующих игр. Ресурсы вашей команды должны быть сосредоточены здесь.

#### Трек 1A: Поставка игр

1.  **Blackjack (в процессе):** Завершить разработку.
2.  **Roulette (возобновление):** Возобновить существующую игру и обеспечить ее готовность к запуску.
3.  **Baccarat (оценка и решение):** Финализировать план разработки на основе оценки сложности.

Не включено:

1.  **Слоты (отложено):** Этот проект остается менее приоритетным, чтобы обеспечить фокус на трех основных играх.

#### Трек 1B: Подготовка платформы и релиза

Этот трек охватывает всю работу, не связанную с разработкой игр, но необходимую для успешного запуска.

- **Клубная и членская система:** Финализировать и отполировать все функции клубной и членской систем.
- **Финализация Бизнес-сессии:** Финализировать модель `BusinessSession`, взяв за основу существующую реализацию-заглушку. Это включает в себя определение логики начала/окончания сессии и интеграцию механики бай-инов. Заглушка является необходимым условием для системы покерных столов и была спроектирована так, чтобы не навязывать технических решений.
- **Сквозное интеграционное тестирование:** Разработать комплексные сквозные интеграционные тесты для всех критически важных систем, включая членскую систему, игры и функции обмена денег, для обеспечения бесперебойной работы. Это включает проверку того, что все валюты конвертируются, назначаются и списываются корректно.
- **Рефакторинг платформы для контейнеризации:**
  - Выделить сокет-сервер в отдельный, независимый сервис.
  - Удалить все механизмы кеширования в рамках одного процесса из бэкенд-сервиса для подготовки к кластеризации.
- **Сервер и инфраструктура:** Убедиться, что вся серверная инфраструктура подготовлена, настроена и готова к производственным нагрузкам.
- **Развертывание и операции:** Финализировать конвейер развертывания и операционную готовность к запуску.

### Трек 2: Инициатива по покеру (Наши обязательства)

Эта инициатива возглавляется и реализуется нашей командой, превращая покер из "желательного" в основной стратегический актив для запуска. Задачи делятся следующим образом:

#### Трек 2A: Основной геймплей покера

- **Интеграция многопользовательского движка покера:** Интегрировать движок для обеспечения многопользовательских игр в покер через единый игровой эндпоинт.
- **Система лобби и столов:** Реализовать бэкенд-логику для системы лобби. Для MVP это будет автоматическая рассадка игроков за доступные столы без ручного выбора в UI.
- **Фронтенд покера:** Разработать пользовательский интерфейс для самой игры в покер на основе предоставленного дизайна.

#### Трек 2B: ИИ и управление ботами

- **Интеграция ИИ-игроков:** Интегрировать ИИ-ботов, которые могут играть в покер по заранее определенным расписаниям, обеспечивая постоянную активность за столами.
- **MVP Менеджер-бота (система бригад):** Поставить первую версию системы управления высокого уровня. MVP позволит администратору создавать "Менеджер-бота" и выдавать ему базовые инструкции, такие как корректировка расписаний и рассадка его ботов-игроков за столы.

#### Трек 2C: Аналитика и надзор (дополнительная цель)

- **Бэк-офис дашборд в реальном времени:** В качестве дополнительной цели мы стремимся предоставить бэк-офисную статистическую систему, которая показывает, что происходит за столами в реальном времени. Это дополнительная функция, не являющаяся обязательной для первоначального запуска.

#### Трек 2D: DevOps и готовность платформы (Наш вклад)

Для обеспечения стабильной, масштабируемой и поддерживаемой платформы наша команда возглавит следующие DevOps-инициативы:

- **Контейнеризация:** Контейнеризация всех сервисов проекта, включая бэкенд, фронтенд, тест-раннер и сокет-сервер, для обеспечения согласованности между средами.
- **Кластеризация сервера Node.js:** Кластеризация сервера Node.js для работы на нескольких процессах, повышая производительность и масштабируемость.
- **Инструментация проектов:** Инструментация всех проектов Node.js для мониторинга и наблюдаемости для отслеживания производительности, выявления медленных запросов и обеспечения работоспособности системы.
- **CI/CD с Docker Compose:** Перевод GitHub Actions на запуск полного решения Docker Compose для комплексного сквозного тестирования в среде, приближенной к производственной.
- **Независимость разработки фронтенда:** Перевод разработки фронтенда на работу с моками или стабильным, общим бэкенд-окружением, отделяя его от циклов разработки бэкенда.
- **Стратегия защищенного развертывания:** Внедрение процесса защищенного развертывания для предотвращения развертывания нерабочего кода и обеспечения стабильности релизов.

## 3. Модель сотрудничества и распределение ресурсов

### Для основных задач команды казино (Трек 1)

- Ваша команда разработчиков будет полностью посвящена выполнению задач из Треков 1A и 1B. Это партнерство позволяет вашей команде избежать усилий по разработке еще одной игры с нуля, освобождая как бэкенд-, так и фронтенд-инженеров для полировки платформы и подготовки к успешному запуску.
- Нашей команде не потребуются ресурсы от ваших основных разработчиков игр для инициативы по покеру.

### Для инициативы по покеру (Трек 2)

Это совместная работа, где наша команда берет на себя основную нагрузку, а ваша команда оказывает целевую поддержку.

#### Обязанности нашей команды (команда Ярослава)

- **Движок покера:** Предоставить полный, переносимый игровой движок.
- **Модуль игровой статистики:** Предоставить архитектуру, руководство и референсную реализацию.
- **UI-компоненты для бэк-офиса:** Предоставить встраиваемые виджеты для статистики игроков и администраторского просмотра покерного стола для поддержки и надзора.
- **Коммуникация и медиация:** Ярослав будет выступать в качестве основного коммуникатора между бизнес- и техническими командами. Он будет служить посредником для решения проблем, изменений в требованиях и недоразумений, предлагая взять на себя ответственность за принятие решений в спорных ситуациях для обеспечения плавного продвижения проекта.
- **Координация релиза:** Ярослав будет выступать в качестве координатора релиза между командами, обеспечивая согласованность и плавное выполнение до даты запуска.
- **Техническое руководство:** Ярослав лично возглавит интеграцию и будет руководить Алексом в технической реализации.

#### Требуемый вклад вашей команды

Вклад вашей команды минимален и четко определен:

- **Управление проектом (Стас):** Выступать в качестве окончательного лица, принимающего решения, и связующего звена.
- **Бэкенд-разработка (Алекс):** Чтобы эффективно использовать его инженерные возможности, Алекс будет посвящен инициативе по покеру. Он будет работать под руководством Ярослава для реализации бэкенд-эндпоинта и сервиса статистики. Это превращает доступный ресурс в ключевого участника для бэкенда покера.
- **Фронтенд и дизайн:** Нашей команде требуется в совокупности **две недели усилий** от ваших фронтенд-ресурсов (разработчика и дизайнера). Это не должен быть ваш лучший инженер.
  - **Дизайн:** Требуется простой и понятный MVP-дизайн для игры в покер.
  - **Реализация фронтенда:** Работа по разработке — это прямое переложение дизайна, так как вся сложная игровая логика обрабатывается нашим движком.

## 4. Предлагаемая техническая архитектура

Для обеспечения скорости и будущей масштабируемости мы примем современную модульную архитектуру.

- **Универсальный игровой бэкенд:** Будет создан единый, без сохранения состояния, бэкенд-эндпоинт для обработки всех игровых взаимодействий. Эта архитектура спроектирована как универсальный бэкенд для всех будущих игр, что позволит интегрировать новые игры без значительных дополнительных усилий со стороны бэкенда.
- **Переносимый игровой движок:** Движок покера инкапсулирует все правила игры и логику состояния. Это общая библиотека, используемая как бэкендом (для валидации), так и фронтендом (для оптимистичных обновлений и логики UI), что исключает дублирование кода.
- **Интеграция сервиса статистики:** Существующий модуль статистики будет интегрирован с вашей базой данных. Это не новый сервис, а подключение готового компонента к вашей существующей инфраструктуре для обеспечения эффективного сбора статистики игроков.
- **Интегрированные виджеты для бэк-офиса:** Наши модули включают готовые к использованию виджеты для бэк-офиса для статистики игроков и надзора за играми. Они могут быть встроены непосредственно в вашу административную панель и не требуют усилий по разработке с вашей стороны.

## 5. Следующие шаги и коммуникация

- **Решение:** Стас должен предоставить окончательное решение по этому плану на встрече в **четверг**.
- **Приоритезация:** Стас должен подтвердить приоритезацию работы по дизайну покера для Бориса и запланировать время Саргиса для разработки UI.
- **Документация:** Ярослав предоставит технические спецификации и документацию по интеграции. Подробности см. в [Руководстве по интеграции Poker Engine](https://gist.github.com/Inviz/ae2b0c6962e96da3ff8067adba73e8da).
- **Коммуникация:**
  - Для повышения прозрачности будет создан специальный канал в Slack для Ярослава, Димы, Стаса и Саргиса.
  - Отслеживание задач будет по-прежнему осуществляться в вашей существующей системе тикетов.
